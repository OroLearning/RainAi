import React, { useState } from 'react';

const BackgroundElements = () => {
  // Creating a very dense set of elements to fill the space as requested
  const elements = [
    // Words
    { type: 'word', content: 'SCALE', top: '5%', left: '10%', rotate: '-15deg' },
    { type: 'word', content: 'REVENUE', top: '20%', left: '80%', rotate: '10deg' },
    { type: 'word', content: 'HOOK', top: '70%', left: '5%', rotate: '-8deg' },
    { type: 'word', content: 'STORY', top: '85%', left: '75%', rotate: '12deg' },
    { type: 'word', content: 'AI', top: '45%', left: '90%', rotate: '-25deg' },
    { type: 'word', content: 'RAIN', top: '3%', left: '60%', rotate: '5deg' },
    { type: 'word', content: 'GROWTH', top: '95%', left: '20%', rotate: '-10deg' },
    { type: 'word', content: 'PROFIT', top: '50%', left: '8%', rotate: '15deg' },
    { type: 'word', content: 'FLOW', top: '30%', left: '40%', rotate: '-20deg' },
    { type: 'word', content: 'STRATEGY', top: '75%', left: '88%', rotate: '15deg' },
    { type: 'word', content: 'CONVERSION', top: '15%', left: '30%', rotate: '5deg' },
    { type: 'word', content: 'LEADS', top: '60%', left: '82%', rotate: '-12deg' },
    { type: 'word', content: 'IMPACT', top: '38%', left: '72%', rotate: '8deg' },
    { type: 'word', content: 'VISION', top: '92%', left: '55%', rotate: '-5deg' },
    { type: 'word', content: 'CASH', top: '58%', left: '15%', rotate: '20deg' },

    // Icons - Brains
    { type: 'icon', icon: 'brain', top: '10%', left: '50%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'brain', top: '80%', left: '45%', size: 'w-4 h-4' },
    { type: 'icon', icon: 'brain', top: '55%', left: '25%', size: 'w-6 h-6' },
    { type: 'icon', icon: 'brain', top: '25%', left: '15%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'brain', top: '35%', left: '85%', size: 'w-4 h-4' },

    // Icons - Dollars
    { type: 'icon', icon: 'dollar', top: '75%', left: '18%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'dollar', top: '12%', left: '88%', size: 'w-4 h-4' },
    { type: 'icon', icon: 'dollar', top: '40%', left: '35%', size: 'w-6 h-6' },
    { type: 'icon', icon: 'dollar', top: '65%', left: '60%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'dollar', top: '5%', left: '25%', size: 'w-4 h-4' },

    // Icons - Lightning
    { type: 'icon', icon: 'lightning', top: '42%', left: '12%', size: 'w-6 h-6' },
    { type: 'icon', icon: 'lightning', top: '68%', left: '72%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'lightning', top: '22%', left: '65%', size: 'w-4 h-4' },
    { type: 'icon', icon: 'lightning', top: '88%', left: '85%', size: 'w-6 h-6' },
    { type: 'icon', icon: 'lightning', top: '15%', left: '5%', size: 'w-5 h-5' },

    // Icons - Clouds
    { type: 'icon', icon: 'cloud', top: '55%', left: '80%', size: 'w-7 h-7' },
    { type: 'icon', icon: 'cloud', top: '25%', left: '35%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'cloud', top: '8%', left: '75%', size: 'w-6 h-6' },
    { type: 'icon', icon: 'cloud', top: '90%', left: '10%', size: 'w-5 h-5' },
    { type: 'icon', icon: 'cloud', top: '35%', left: '55%', size: 'w-4 h-4' },

    // Dense Rain Streaks
    { type: 'streak', top: '5%', left: '30%', length: 'w-24' },
    { type: 'streak', top: '8%', left: '45%', length: 'w-16' },
    { type: 'streak', top: '12%', left: '15%', length: 'w-32' },
    { type: 'streak', top: '18%', left: '60%', length: 'w-20' },
    { type: 'streak', top: '22%', left: '35%', length: 'w-40' },
    { type: 'streak', top: '80%', left: '80%', length: 'w-28' },
    { type: 'streak', top: '32%', left: '10%', length: 'w-36' },
    { type: 'streak', top: '38%', left: '50%', length: 'w-24' },
    { type: 'streak', top: '42%', left: '25%', length: 'w-44' },
    { type: 'streak', top: '48%', left: '75%', length: 'w-18' },
    { type: 'streak', top: '52%', left: '40%', length: 'w-30' },
    { type: 'streak', top: '58%', left: '15%', length: 'w-32' },
    { type: 'streak', top: '62%', left: '85%', length: 'w-22' },
    { type: 'streak', top: '68%', left: '30%', length: 'w-38' },
    { type: 'streak', top: '72%', left: '55%', length: 'w-26' },
    { type: 'streak', top: '78%', left: '10%', length: 'w-42' },
    { type: 'streak', top: '82%', left: '65%', length: 'w-20' },
    { type: 'streak', top: '88%', left: '40%', length: 'w-36' },
    { type: 'streak', top: '92%', left: '80%', length: 'w-24' },
    { type: 'streak', top: '95%', left: '25%', length: 'w-28' },
    { type: 'streak', top: '15%', left: '90%', length: 'w-12' },
    { type: 'streak', top: '45%', left: '5%', length: 'w-48' },
    { type: 'streak', top: '65%', left: '95%', length: 'w-14' },
    { type: 'streak', top: '85%', left: '5%', length: 'w-30' },
  ];

  const renderIcon = (name: string, className: string) => {
    switch (name) {
      case 'brain':
        return (
          <svg className={className} fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
            <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-2.5 2.5M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 2.5 2.5M12 9h5a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-5M12 9H7a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h5" />
          </svg>
        );
      case 'dollar':
        return (
          <svg className={className} fill="none" stroke="currentColor" strokeWidth="2.5" viewBox="0 0 24 24">
            <path d="M12 1v22m5-18H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H7" />
          </svg>
        );
      case 'lightning':
        return (
          <svg className={className} fill="currentColor" viewBox="0 0 24 24">
            <path d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
        );
      case 'cloud':
        return (
          <svg className={className} fill="none" stroke="currentColor" strokeWidth="2.5" viewBox="0 0 24 24">
            <path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973" />
            <path d="m13 11-4 6h6l-4 6" />
          </svg>
        );
      default:
        return null;
    }
  };

  return (
    <div className="absolute inset-0 overflow-hidden pointer-events-none opacity-[0.2] dark:opacity-[0.3] z-0 select-none">
      {elements.map((el, i) => (
        <div
          key={i}
          className="absolute"
          style={{ top: el.top, left: el.left, transform: el.rotate ? `rotate(${el.rotate})` : undefined }}
        >
          {el.type === 'word' && (
            <span className="text-blue-600 dark:text-blue-500 font-black text-[8px] md:text-[9px] tracking-[0.35em] uppercase whitespace-nowrap">
              {el.content}
            </span>
          )}
          {el.type === 'icon' && renderIcon(el.icon!, `${el.size} text-blue-600 dark:text-blue-500`)}
          {el.type === 'streak' && (
            <div className={`${el.length} h-[1px] bg-gradient-to-r from-transparent via-blue-600/60 dark:via-blue-500/60 to-transparent rotate-[-35deg]`}></div>
          )}
        </div>
      ))}
    </div>
  );
};

const VisualMockup: React.FC<{ 
  inputValue: string; 
  setInputValue: (v: string) => void;
  onGenerate: (directorMode: boolean) => void;
  isLoading: boolean;
}> = ({ inputValue, setInputValue, onGenerate, isLoading }) => {
  const [isDirectorMode, setIsDirectorMode] = useState(false);

  return (
    <div className="relative w-full max-w-6xl mx-auto min-h-[600px] flex items-center justify-center mt-12 mb-20 px-4">
      {/* Main Generator Card */}
      <div className="relative w-full max-w-lg bg-white dark:bg-darkCard rounded-[48px] md:rounded-[56px] shadow-heavy p-8 md:p-12 border border-slate-100/50 dark:border-darkBorder z-10 transition-colors duration-300 overflow-hidden">
         {/* Background Pattern Layer */}
         <BackgroundElements />

         <div className="relative z-10 flex items-center justify-between mb-8 md:mb-10">
            <div className="w-8 h-8 border border-slate-100 dark:border-slate-800 rounded-full flex items-center justify-center text-[10px] text-slate-300 dark:text-slate-600">âœ•</div>
            <div className="text-blue-600">
               <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
            </div>
         </div>

         <div className="relative z-10 flex justify-center mb-10">
            <div className="w-20 h-20 md:w-24 md:h-24 bg-gradient-to-tr from-blue-700 to-blue-500 rounded-[28px] md:rounded-[32px] flex items-center justify-center shadow-lg shadow-blue-500/20">
               <svg className="w-10 h-10 md:w-12 md:h-12 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973" />
                <path d="m13 11-4 6h6l-4 6" />
               </svg>
            </div>
         </div>

         <div className="relative z-10 mt-10 flex flex-col gap-4">
            <div className="relative">
              <input 
                type="text" 
                value={inputValue}
                onChange={(e) => setInputValue(e.target.value)}
                placeholder="Describe product & audience..."
                className="w-full bg-slate-50/80 dark:bg-slate-900/50 border-2 border-slate-100 dark:border-darkBorder rounded-full py-5 pl-12 pr-6 text-sm font-bold text-slate-800 dark:text-white focus:bg-white dark:focus:bg-slate-900 focus:border-blue-400 focus:outline-none shadow-inner transition-all backdrop-blur-sm"
              />
              <div className="absolute left-3 top-1/2 -translate-y-1/2 w-7 h-7 bg-slate-900 dark:bg-blue-600 text-white rounded-full flex items-center justify-center font-black text-lg">+</div>
            </div>

            <div className="grid grid-cols-2 gap-3">
               <div className="relative group/director-btn">
                 <button 
                    onClick={() => setIsDirectorMode(!isDirectorMode)}
                    className={`flex items-center justify-center gap-2 w-full h-14 rounded-3xl border-2 transition-all duration-300 font-black text-[9px] uppercase tracking-widest ${isDirectorMode ? 'bg-blue-600 border-blue-600 text-white shadow-lg' : 'bg-white/80 dark:bg-darkCard/80 border-slate-100 dark:border-darkBorder text-slate-400 dark:text-slate-500 backdrop-blur-sm'}`}
                 >
                    <svg className="w-5 h-5 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                      {/* Gimbal arm structure */}
                      <path d="M12 18v3" />
                      <path d="M9 21h6" />
                      <path d="M12 13v2" />
                      <circle cx="12" cy="15" r="3" />
                      {/* Camera body on gimbal */}
                      <rect x="8" y="5" width="8" height="6" rx="1" />
                      <path d="M16 8l3-1.5v3L16 8" />
                    </svg>
                    <span>Director Mode</span>
                    <div className="relative group/info-trigger ml-1">
                      <div className="w-4 h-4 rounded-full border border-current flex items-center justify-center text-[8px] font-black cursor-help hover:bg-current hover:text-white transition-all">i</div>
                      <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-48 p-3 bg-slate-900 text-white text-[10px] font-bold rounded-2xl opacity-0 invisible group-hover/info-trigger:opacity-100 group-hover/info-trigger:visible transition-all duration-300 z-[100] shadow-2xl border border-white/10 text-center leading-relaxed">
                        Let the Thunderstorm Begin - allow us to show you how to shoot your content
                        <div className="absolute top-full left-1/2 -translate-x-1/2 border-[6px] border-transparent border-t-slate-900"></div>
                      </div>
                    </div>
                 </button>
               </div>

               <button className="flex items-center justify-center gap-2 h-14 rounded-3xl border-2 bg-white/80 dark:bg-darkCard/80 border-slate-100 dark:border-darkBorder text-slate-400 dark:text-slate-500 font-black text-[9px] uppercase tracking-widest backdrop-blur-sm">
                  <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                    <line x1="8" y1="23" x2="16" y2="23"/>
                  </svg>
                  Voice
               </button>
            </div>

            <button 
               onClick={() => onGenerate(isDirectorMode)}
               disabled={isLoading}
               className={`relative w-full h-16 rounded-3xl text-white font-black text-xs uppercase tracking-[0.2em] transition-all duration-500 shadow-xl flex items-center justify-center gap-3 overflow-hidden ${isLoading ? 'bg-blue-600' : 'bg-slate-900 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-700'}`}
            >
               {isLoading && (
                 <div className="absolute inset-0 pointer-events-none">
                    <svg className="w-full h-full overflow-visible" preserveAspectRatio="none">
                      <rect 
                        x="0" y="0" width="100%" height="100%" 
                        rx="24" ry="24"
                        fill="none" 
                        stroke="white" 
                        strokeWidth="3" 
                        strokeDasharray="4, 12" 
                        className="animate-dots-rotate"
                        opacity="0.8"
                      />
                    </svg>
                 </div>
               )}
               {isLoading ? (
                 <>
                   <div className="relative w-6 h-6 flex flex-col items-center">
                      <svg className="w-6 h-4 text-white mb-[-4px]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 13a4 4 0 0 1 0 8H7a5 5 0 0 1 0-10 5 5 0 0 1 8 2z" />
                      </svg>
                      <div className="flex gap-1">
                        <div className="w-0.5 h-1.5 bg-white rain-drop"></div>
                        <div className="w-0.5 h-1.5 bg-white rain-drop"></div>
                        <div className="w-0.5 h-1.5 bg-white rain-drop"></div>
                      </div>
                   </div>
                   <span className="relative z-10">Synthesizing...</span>
                 </>
               ) : "Synthesize Strategy"}
            </button>
         </div>
      </div>
    </div>
  );
};

export default VisualMockup;